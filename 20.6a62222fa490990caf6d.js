(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{aCDK:function(t,e,n){"use strict";n.r(e),n.d(e,"WishListModule",function(){return O});var s=n("M0ag"),c=n("ExrR"),i=n("fXoL"),o=n("dEAy"),a=n("PScX"),r=n("Ac7g"),d=n("luDG"),l=n("3Pt+"),u=n("ocnv"),b=n("O3k0"),m=n("PTRe"),h=n("C2AL"),g=n("OzZK"),p=n("RwU8"),f=n("zAKX");function y(t,e){if(1&t){const t=i.Xb();i.Wb(0,"nz-select",15),i.dc("ngModelChange",function(e){return i.Bc(t),i.gc().form.currency_code=e}),i.Rb(1,"nz-option",16),i.Vb()}if(2&t){const t=i.gc();i.oc("ngModel",t.form.currency_code)}}let v=(()=>{class t{constructor(t,e,n,s){this.modal=t,this.msgSrv=e,this.http=n,this.cache=s,this.record={},this.form={name:"",ledger_id:"",remark:"",currency_amount:"",currency_code:"CNY",status:"todo"}}ngOnInit(){this.record.id&&(this.form=Object.assign({},this.record))}save(t){const e=this.record.id?`/${this.record.id}`:"",n=this.record.id?"put":"post";t.ledger_id=this.cache.getNone(c.a.cacheKey.defaultIdLedger),this.http.request(n,`/api/wish-lists${e}`,{body:t}).subscribe(t=>{0===t.code?(this.msgSrv.success("\u4fdd\u5b58\u6210\u529f"),this.modal.close(t.data)):this.msgSrv.warning(t.message)})}close(){this.modal.destroy()}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(o.b),i.Qb(a.e),i.Qb(r.p),i.Qb(d.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["app-wish-list-form"]],decls:19,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["nz-form","","se-container","1",3,"ngSubmit"],["f","ngForm"],["label","\u540d\u79f0"],["nz-input","","name","name","required","",3,"ngModel","ngModelChange"],["label","\u9884\u8ba1\u91d1\u989d"],[3,"nzAddOnAfter"],["nz-input","","type","number","name","currency_amount","required","",3,"ngModel","ngModelChange"],["addOnAfterBtn",""],["label","\u5907\u6ce8"],["name","remark","nz-input","","rows","4",3,"ngModel","ngModelChange"],["col","1"],["nz-button","","type","button",3,"click"],["nz-button","","nzType","primary",3,"disabled"],["name","currency_code",2,"width","80px",3,"ngModel","ngModelChange"],["nzLabel","CNY","nzValue","CNY"]],template:function(t,e){if(1&t&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Lc(2,"\u7f16\u8f91\u613f\u671b"),i.Vb(),i.Vb(),i.Wb(3,"form",2,3),i.dc("ngSubmit",function(){return e.save(e.form)}),i.Wb(5,"se",4),i.Wb(6,"input",5),i.dc("ngModelChange",function(t){return e.form.name=t}),i.Vb(),i.Vb(),i.Wb(7,"se",6),i.Wb(8,"nz-input-group",7),i.Wb(9,"input",8),i.dc("ngModelChange",function(t){return e.form.currency_amount=t}),i.Vb(),i.Jc(10,y,2,1,"ng-template",null,9,i.Kc),i.Vb(),i.Vb(),i.Wb(12,"se",10),i.Wb(13,"textarea",11),i.dc("ngModelChange",function(t){return e.form.remark=t}),i.Vb(),i.Vb(),i.Wb(14,"se",12),i.Wb(15,"button",13),i.dc("click",function(){return e.close()}),i.Lc(16,"\u5173\u95ed"),i.Vb(),i.Wb(17,"button",14),i.Lc(18,"\u4fdd\u5b58"),i.Vb(),i.Vb(),i.Vb()),2&t){const t=i.yc(4),n=i.yc(11);i.Cb(6),i.oc("ngModel",e.form.name),i.Cb(2),i.oc("nzAddOnAfter",n),i.Cb(1),i.oc("ngModel",e.form.currency_amount),i.Cb(4),i.oc("ngModel",e.form.remark),i.Cb(4),i.oc("disabled",t.invalid)}},directives:[l.u,l.n,l.o,u.b,b.b,b.a,m.b,l.d,l.s,l.m,l.p,h.a,m.c,l.q,g.a,p.a,f.e,f.a],encapsulation:2}),t})();var z=n("JA5x"),C=n("B+r4"),V=n("ok2U"),W=n("DGaY"),w=n("ofXK");const k=["st"];function M(t,e){if(1&t&&(i.Wb(0,"span",8),i.Lc(1),i.Vb()),2&t){const t=e.$implicit;i.oc("ngClass","text-red"),i.Cb(1),i.Oc(" ",t.currency_code," ",t.currency_amount," ")}}const x=function(){return{xs:6,sm:16,md:24,lg:32}};let _=(()=>{class t{constructor(t,e,n,s){this.http=t,this.modal=e,this.message=n,this.cache=s,this.loading=!0,this.list=[],this.selectData={},this.q={page:1,pageSize:100,name:"",ledger_id:0},this.url="/api/wish-lists",this.searchSchema={properties:{name:{type:"string",title:"\u540d\u79f0"}}},this.columns=[{title:"\u72b6\u6001",type:"badge",index:"status",badge:{todo:{text:"\u5f85\u8d2d",color:"success"},done:{text:"\u5df2\u8d2d",color:"default"},cancelled:{text:"\u653e\u5f03",color:"default"}}},{title:"\u540d\u79f0 ",index:"name"},{title:"\u91d1\u989d",render:"custom"},{title:"\u5907\u6ce8",index:"remark"},{title:"\u521b\u5efa\u65f6\u95f4",type:"date",index:"created_at"},{title:"\u66f4\u65b0\u65f6\u95f4",type:"date",index:"updated_at"},{title:"",buttons:[{icon:"edit",type:"modal",click:t=>this.form(t)},{icon:"check-circle",click:t=>this.updateStatus(t,"done"),iif:t=>"todo"===t.status,tooltip:"\u5df2\u8d2d\u4e70"},{icon:"close-circle",click:t=>this.updateStatus(t,"cancelled"),iif:t=>"todo"===t.status,tooltip:"\u653e\u5f03\u8d2d\u4e70"},{icon:"delete",type:"del",pop:{title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",okType:"danger"},click:(t,e,n)=>{this.delete(t),n.removeRow(t)}}]}]}ngOnInit(){this.getData()}getData(){this.loading=!0,this.q.ledger_id=this.cache.getNone(c.a.cacheKey.defaultIdLedger),this.http.get(this.url,this.q).subscribe(t=>{this.list=t.data.items,this.pagination=t.data._meta,this.loading=!1})}form(t={}){this.modal.create(v,{record:t,selectData:this.selectData},{size:"md"}).subscribe(t=>{this.getData()})}delete(t){this.http.delete(`${this.url}/${t.id}`).subscribe(t=>{0===(null==t?void 0:t.code)?this.message.success("\u5220\u9664\u6210\u529f"):this.message.warning(null==t?void 0:t.message)})}updateStatus(t,e){this.http.put(`${this.url}/${t.id}/status`,{status:e}).subscribe(t=>{0===(null==t?void 0:t.code)?(this.getData(),this.message.success("\u66f4\u65b0\u6210\u529f")):this.message.warning(null==t?void 0:t.message)})}submit(t){t.name&&(this.q.name=t.name,this.getData())}reset(){this.q.name="",this.getData()}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(r.p),i.Qb(r.j),i.Qb(a.e),i.Qb(d.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["app-wish-list-index"]],viewQuery:function(t,e){if(1&t&&i.Qc(k,1),2&t){let t;i.xc(t=i.ec())&&(e.st=t.first)}},decls:12,vars:5,consts:[[1,"pt-lg"],["nz-row","",3,"nzGutter"],["nz-col",""],["mode","search",3,"schema","formSubmit","formReset"],["nz-button","","nzType","primary",3,"click"],[3,"data","columns"],["st",""],["st-row","custom"],[3,"ngClass"]],template:function(t,e){1&t&&(i.Wb(0,"div",0),i.Wb(1,"nz-card"),i.Wb(2,"div",1),i.Wb(3,"div",2),i.Wb(4,"sf",3),i.dc("formSubmit",function(t){return e.submit(t)})("formReset",function(){return e.reset()}),i.Vb(),i.Vb(),i.Wb(5,"div",2),i.Wb(6,"button",4),i.dc("click",function(){return e.form()}),i.Lc(7,"\u65b0\u5efa"),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Wb(8,"nz-card"),i.Wb(9,"st",5,6),i.Jc(11,M,2,3,"ng-template",7),i.Vb(),i.Vb()),2&t&&(i.Cb(2),i.oc("nzGutter",i.rc(4,x)),i.Cb(2),i.oc("schema",e.searchSchema),i.Cb(5),i.oc("data",e.list)("columns",e.columns))},directives:[z.a,C.c,C.a,V.b,g.a,p.a,h.a,W.a,W.c,w.m],encapsulation:2}),t})();var S=n("tyNb");const D=[{path:"index",component:_}];let L=(()=>{class t{}return t.\u0275mod=i.Ob({type:t}),t.\u0275inj=i.Nb({factory:function(e){return new(e||t)},imports:[[S.n.forChild(D)],S.n]}),t})(),O=(()=>{class t{}return t.\u0275mod=i.Ob({type:t}),t.\u0275inj=i.Nb({factory:function(e){return new(e||t)},imports:[[s.b,L]]}),t})()}}]);