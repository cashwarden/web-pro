{"version":3,"sources":["./src/app/routes/member/member.module.ts","./src/app/routes/member/member-routing.module.ts","./src/app/routes/member/form/form.component.html","./src/app/routes/member/form/form.component.ts","./src/app/routes/member/index/index.component.ts","./src/app/routes/member/index/index.component.html"],"names":[],"mappings":"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","file":"member-member-module.js","sourcesContent":["import { NgModule, Type } from '@angular/core';\nimport { SharedModule } from '@shared';\nimport { MemberFormComponent } from './form/form.component';\nimport { MemberIndexComponent } from './index/index.component';\nimport { MemberRoutingModule } from './member-routing.module';\n\nconst COMPONENTS: Type<void>[] = [\n  MemberIndexComponent,\n  MemberFormComponent];\n\n@NgModule({\n  imports: [\n    SharedModule,\n    MemberRoutingModule\n  ],\n  declarations: COMPONENTS,\n})\nexport class MemberModule { }\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { MemberIndexComponent } from './index/index.component';\n\nconst routes: Routes = [\n\n  { path: 'index', component: MemberIndexComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class MemberRoutingModule { }\n","<div class=\"modal-header\">\n  <div class=\"modal-title\">成员编辑</div>\n</div>\n\n<form nz-form #f=\"ngForm\" se-container=\"1\" (ngSubmit)=\"save(form)\" labelWidth=\"100\">\n  <!-- <se label=\"封面\">\n    <input type=\"text\" nz-input [(ngModel)]=\"form.cover\" name=\"cover\" />\n  </se> -->\n  <se label=\"用户名\">\n    <input type=\"text\" nz-input [(ngModel)]=\"form.username\" name=\"username\" required />\n  </se>\n  <se label=\"Email\">\n    <input type=\"text\" nz-input [(ngModel)]=\"form.email\" name=\"email\" required />\n  </se>\n  <se label=\"角色\">\n    <nz-select [(ngModel)]=\"form.role\" name=\"role\" required>\n      <nz-option nzCustomContent [nzLabel]=\"i.name\" [nzValue]=\"i.type\" *ngFor=\"let i of types\">\n        {{ i.name }}\n      </nz-option>\n    </nz-select>\n  </se>\n  <se label=\"密码\" *ngIf=\"!record.id\">\n    <input type=\"password\" nz-input [(ngModel)]=\"form.password\" name=\"password\" required />\n  </se>\n  <se label=\"密码\" extra=\"不填写则不修改密码\" *ngIf=\"record.id\">\n    <input type=\"password\" nz-input [(ngModel)]=\"form.password\" name=\"password\" />\n  </se>\n  <se col=\"1\">\n    <button nz-button type=\"button\" (click)=\"close()\">关闭</button>\n    <button nz-button nzType=\"primary\" [disabled]=\"f.invalid\">保存</button>\n  </se>\n</form>\n","import { Component, OnInit } from '@angular/core';\nimport { CacheService } from '@delon/cache';\nimport { _HttpClient } from '@delon/theme';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { NzModalRef } from 'ng-zorro-antd/modal';\nimport { params } from 'src/app/shared/params';\n\n@Component({\n  selector: 'app-member-form',\n  templateUrl: './form.component.html',\n})\nexport class MemberFormComponent implements OnInit {\n  record: any = {};\n  types: [];\n\n  form = {\n    username: '',\n    email: '',\n    password: '',\n    role: '',\n  };\n  codes: [{ code: string, name: string }];\n\n  constructor(private http: _HttpClient, private modal: NzModalRef, private msgSrv: NzMessageService, private cache: CacheService) {\n  }\n\n  ngOnInit(): void {\n    if (this.record.id) {\n      this.form = this.record;\n    }\n  }\n\n  save(value: any) {\n    const url = this.record.id ? `/${this.record.id}` : '';\n    const method = this.record.id ? 'put' : 'post';\n    this.http.request(method, `/api/members${url}`, { body: value }).subscribe((res: any) => {\n      if (res.code !== 0) {\n        this.msgSrv.warning(res.message);\n        return;\n      }\n      this.msgSrv.success('保存成功');\n      this.modal.close(res.data);\n    });\n  }\n\n  close() {\n    this.modal.destroy();\n  }\n}\n","import { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\nimport { STColumn, STComponent } from '@delon/abc/st';\nimport { CacheService } from '@delon/cache';\nimport { SFSchema } from '@delon/form';\nimport { ModalHelper, SettingsService, _HttpClient } from '@delon/theme';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { params } from 'src/app/shared/params';\nimport { MemberFormComponent } from '../form/form.component';\n\n\n@Component({\n  selector: 'app-member-index',\n  templateUrl: './index.component.html',\n})\nexport class MemberIndexComponent implements OnInit {\n  @ViewChild('st', { static: false }) st: STComponent;\n  url = '/api/members';\n  loading = true;\n  pagination: {};\n  list: any[] = [];\n  q = {\n    page: 1,\n    pageSize: 100,\n    name: '',\n  };\n  types: any[] = [];\n  user: any;\n\n  // url = `/api/records`;\n  searchSchema: SFSchema = {\n    properties: {\n      name: {\n        type: 'string',\n        title: '名称',\n      },\n    },\n  };\n\n  columns: STColumn[] = [\n    { title: '用户名', renderTitle: 'customTitle', render: 'custom' },\n    { title: 'Email', index: 'email' },\n    { title: '角色', index: 'role_name' },\n    {\n      title: '状态',\n      type: 'badge',\n      index: 'status',\n      badge: {\n        active: { text: '激活', color: 'success' },\n        unactivated: { text: '未激活', color: 'default' },\n      },\n    },\n    { title: '加入时间', type: 'date', index: 'created_at' },\n    {\n      title: '',\n      buttons: [\n        {\n          icon: 'edit',\n          click: (item: any) => this.form(item),\n          iif: (record) => record.role !== 'owner' && this.isOwner,\n          iifBehavior: 'disabled',\n        },\n        {\n          icon: 'usergroup-delete',\n          click: (record) => this.updateRole(record, 'disabled'),\n          iif: (record) => record.role !== 'owner' && record.role !== 'disabled' && this.isOwner,\n          tooltip: `冻结用户`,\n        },\n        // {\n        //   icon: 'delete',\n        //   type: 'del',\n        //   pop: {\n        //     title: '确定要移除吗？如果成员被移除，所有涉及的记录、分类将永远失去。',\n        //     okType: 'danger',\n        //   },\n        //   click: (record, _modal, comp) => {\n        //     this.delete(record);\n        //     // tslint:disable-next-line: no-non-null-assertion\n        //     comp!.removeRow(record);\n        //   },\n        //   iif: (record) => record.role !== 'owner',\n        //   iifBehavior: 'disabled',\n        // },\n      ],\n    },\n  ];\n  isOwner: boolean;\n\n  constructor(\n    private http: _HttpClient,\n    private modal: ModalHelper,\n    private cdr: ChangeDetectorRef,\n    private message: NzMessageService,\n    private settings: SettingsService,\n  ) { }\n\n  ngOnInit() {\n    this.getTypes();\n    this.getData();\n    this.user = this.settings.user;\n    this.isOwner = this.user.role === 'owner';\n  }\n\n  getData(): void {\n    this.loading = true;\n    this.http.get(this.url, this.q).subscribe((res) => {\n      this.list = res.data.items;\n      this.pagination = res.data._meta;\n      this.loading = false;\n    });\n  }\n\n  getTypes(): void {\n    this.http.get(`${this.url}/types`).subscribe((res) => {\n      if (res.code !== 0) {\n        this.message.warning(res.message);\n        return;\n      }\n      if (res.data) {\n        this.types = res.data;\n        this.cdr.detectChanges();\n      }\n    });\n  }\n\n  delete(record: any): void {\n    this.http.delete(`${this.url}/${record.id}`).subscribe((res) => {\n      if (res?.code !== 0) {\n        this.message.warning(res?.message);\n        return;\n      }\n      // this.getData();\n      this.message.success('删除成功');\n    });\n  }\n\n  updateRole(record: any, role: string): void {\n    this.http.put(`${this.url}/${record.id}`, { role }).subscribe((res) => {\n      if (res?.code !== 0) {\n        this.message.warning(res?.message);\n        return;\n      }\n      this.getData();\n      this.message.success('更新成功');\n    });\n  }\n\n  form(record: { id?: number } = {}): void {\n    this.modal.create(MemberFormComponent, { record, types: this.types }, { size: 'md' }).subscribe((res) => {\n      if (record.id) {\n        // record = res;\n        this.getData();\n      } else {\n        this.list.splice(0, 0, res);\n        this.list = [...this.list];\n      }\n    });\n  }\n\n  submit(value: any): void {\n    this.q = value;\n    this.getData();\n  }\n\n  reset(): void {\n    this.q.name = '';\n    this.getData();\n  }\n\n}\n","<div class=\"pt-md\">\n  <nz-card>\n    <div nz-row [nzGutter]=\"{ xs: 6, sm: 16, md: 24, lg: 32 }\">\n      <div nz-col>\n        <sf mode=\"search\" [schema]=\"searchSchema\" (formSubmit)=\"submit($event)\" (formReset)=\"reset()\"></sf>\n      </div>\n      <div nz-col *ngIf=\"isOwner\">\n        <button (click)=\"form()\" nz-button nzType=\"primary\">新建</button>\n      </div>\n    </div>\n  </nz-card>\n</div>\n\n<nz-card>\n  <st #st [data]=\"list\" [columns]=\"columns\">\n    <ng-template st-row=\"customTitle\" type=\"title\" let-c>\n      {{ c.title.text }}\n    </ng-template>\n    <ng-template st-row=\"custom\" let-item let-index=\"index\">\n      {{ item.username }}\n    </ng-template>\n  </st>\n</nz-card>\n"],"sourceRoot":"webpack:///"}