{"version":3,"sources":["./src/app/routes/analysis/index/index.component.ts","./src/app/routes/analysis/index/index.component.html","./src/app/routes/analysis/analysis-routing.module.ts","./src/app/routes/analysis/analysis.module.ts"],"names":[],"mappings":"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","file":"analysis-analysis-module.js","sourcesContent":["import { DatePipe } from '@angular/common';\nimport { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\nimport { STColumn, STComponent } from '@delon/abc/st';\nimport { CacheService } from '@delon/cache';\nimport { G2BarData } from '@delon/chart/bar';\nimport { G2PieData } from '@delon/chart/pie';\nimport { DrawerHelper, ModalHelper, _HttpClient } from '@delon/theme';\nimport { deepCopy, getTimeDistance } from '@delon/util';\nimport { yuan } from '@shared';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { params } from 'src/app/shared/params';\nimport { RecordModalComponent } from 'src/app/shared/record/modal.component';\n\n@Component({\n  selector: 'app-analysis-index',\n  styleUrls: ['./index.component.less'],\n  templateUrl: './index.component.html',\n})\nexport class AnalysisIndexComponent implements OnInit {\n  isVisible = false;\n  q: any = {};\n  data: { total: { expense: number; income: number; surplus: number }; expense: []; income: [] };\n  pieData: { total: { expense: number; income: number; surplus: number }; expense: G2PieData[]; income: G2PieData[] };\n  recordSumData: { total: { expense: number; income: number; surplus: number }; expense: G2BarData[]; income: G2BarData[] };\n  date: Date[] = [];\n  loading = true;\n  types = ['expense', 'income'];\n  maxRecords: Array<{ date: string; out: string; in: string; records: [] }> = [];\n\n  @ViewChild('st', { static: false }) st: STComponent;\n  columns: STColumn[] = [\n    {\n      title: '分类',\n      render: 'custom',\n    },\n    { title: '金额', type: 'number', index: 'amount' },\n  ];\n\n  tabs: Array<{ key: string; name: string; show?: boolean }> = [\n    { key: 'day', name: '日视图', show: true },\n    { key: 'month', name: '月视图' },\n    { key: 'year', name: '年视图' },\n  ];\n\n  constructor(\n    private http: _HttpClient,\n    private cdr: ChangeDetectorRef,\n    private datePipe: DatePipe,\n    private cache: CacheService,\n    private modal: ModalHelper,\n    private msg: NzMessageService,\n  ) {\n  }\n\n  ngOnInit() {\n    this.date = getTimeDistance('month');\n    if (this.date) {\n      this.q.date = this.date.map((item: any) => this.datePipe.transform(item, 'yyyy-MM-dd')).join('~');\n    }\n    this.q.ledger_id = this.cache.getNone(params.cacheKey.defaultIdLedger);\n    this.getData();\n    this.getRecordSumData();\n    this.getMaxRecords();\n  }\n\n  getData(): void {\n    this.loading = true;\n    const q = {};\n    Object.entries(this.q)\n      .filter(([, value]) => value !== null)\n      .map(([key, value]) => (q[key] = value));\n    this.q = q;\n\n    this.http.get('/api/analysis/category', this.q).subscribe((res) => {\n      this.data = deepCopy(res.data);\n      this.pieData = deepCopy(res.data);\n      this.pieData.expense = this.pieData.expense.map((item: any) => ({ x: item.category_name, y: item.amount }));\n      this.pieData.income = this.pieData.income.map((item: any) => ({ x: item.category_name, y: item.amount }));\n\n      this.loading = false;\n      this.cdr.detectChanges();\n    });\n  }\n\n  getRecordSumData(): void {\n    const q = {};\n    Object.entries(this.q)\n      .filter(([, value]) => value !== null)\n      .map(([key, value]) => (q[key] = value));\n    this.q = q;\n    this.http.get('/api/analysis/date', this.q).subscribe((res) => {\n      this.recordSumData = res.data;\n      console.log( this.recordSumData);\n      this.recordSumData.expense = this.recordSumData.expense.map((item: any) => ({\n        x: item.date,\n        y: item.amount,\n        color: '#f50',\n      }));\n\n      this.recordSumData.income = this.recordSumData.income.map((item: any) => ({ x: item.date, y: item.amount }));\n      this.cdr.detectChanges();\n    });\n  }\n\n  reloadData(value: {}) {\n    if (value) {\n      this.q.ledger_id = this.cache.getNone(params.cacheKey.defaultIdLedger);\n      this.q = value;\n      this.getData();\n      this.getRecordSumData();\n      this.getMaxRecords();\n    }\n  }\n\n  getMaxRecords() {\n    this.http.get('/api/records', {\n      pageSize: 6,\n      transaction_type: 'expense',\n      ledger_id: this.q.ledger_id,\n      sort: '-amount_cent',\n      date: this.q.date,\n    }).subscribe((res) => {\n      this.maxRecords = res.data.items;\n      this.loading = false;\n      this.cdr.detectChanges();\n    });\n  }\n\n  changeTab(idx: number): void {\n    this.tabs[idx].show = true;\n    this.q.group_type = this.tabs[idx].key;\n\n    this.getRecordSumData();\n    this.cdr.detectChanges();\n  }\n\n  handlePieValueFormat(value: string | number): string {\n    return yuan(value);\n  }\n\n  open(id: number): void {\n    this.q.category_id = id;\n    this.q.pageSize = 100;\n    this.q.reimbursement_status = 'none,todo';\n    this.q.exclude_from_stats = 'false';\n    this.modal.create(RecordModalComponent, { q: this.q }, { size: 'md' }).subscribe((res) => {\n    });\n  }\n}\n","<div class=\"pt-lg\">\n  <app-record-search (searched)=\"reloadData($event)\" (reseted)=\"reloadData($event)\" [date]=\"date\"></app-record-search>\n</div>\n<div nz-row [nzGutter]=\"24\">\n  <div nz-col nzXs=\"24\" nzSm=\"24\" nzMd=\"24\" nzLg=\"16\">\n    <nz-card [nzLoading]=\"loading\" [nzBordered]=\"false\" nzTitle=\"分类饼图\" class=\"mb-0\">\n      <ng-container *ngIf=\"!loading\">\n        <g2-pie\n          [hasLegend]=\"true\"\n          title=\"总支出\"\n          subTitle=\"总支出\"\n          [total]=\"pieData.total.expense | _currency\"\n          [valueFormat]=\"handlePieValueFormat\"\n          [data]=\"pieData.expense\"\n          height=\"295\"\n        ></g2-pie>\n      </ng-container>\n      <ng-container *ngIf=\"!loading\">\n        <g2-pie\n          [hasLegend]=\"true\"\n          title=\"总收入\"\n          subTitle=\"总收入\"\n          [total]=\"pieData.total.income | _currency\"\n          [valueFormat]=\"handlePieValueFormat\"\n          [data]=\"pieData.income\"\n          height=\"295\"\n        ></g2-pie>\n      </ng-container>\n    </nz-card>\n    <nz-card [nzBordered]=\"false\" class=\"ant-card__body-nopadding record-sum-card\">\n      <nz-tabset *ngIf=\"recordSumData\" (nzSelectedIndexChange)=\"changeTab($event)\">\n        <nz-tab *ngFor=\"let tab of tabs\" [nzTitle]=\"tab.name\">\n          <div class=\"bar\">\n            <g2-bar\n              *ngIf=\"tab.show && recordSumData.expense.length\"\n              height=\"295\"\n              [title]=\"'支出' + tab.name\"\n              [data]=\"recordSumData.expense\"\n            ></g2-bar>\n          </div>\n          <div class=\"bar\">\n            <g2-bar\n              *ngIf=\"tab.show && recordSumData.income.length\"\n              height=\"295\"\n              [title]=\"'收入' + tab.name\"\n              [data]=\"recordSumData.income\"\n            ></g2-bar>\n          </div>\n        </nz-tab>\n      </nz-tabset>\n    </nz-card>\n  </div>\n\n  <div nz-col nzXs=\"24\" nzSm=\"24\" nzMd=\"24\" nzLg=\"8\">\n    <nz-card [nzLoading]=\"loading\" [nzBordered]=\"false\" nzTitle=\"分类统计\" class=\"mb-0\">\n      <ng-container *ngFor=\"let type of types\">\n        <st\n          #st\n          [data]=\"data ? data[type] : null\"\n          [loading]=\"loading\"\n          [columns]=\"columns\"\n          size=\"middle\"\n          [page]=\"{ show: false }\"\n          [body]=\"body\"\n        >\n          <ng-template st-row=\"custom\" let-item let-index=\"index\">\n            <a (click)=\"open(item.category_id)\">{{ item.category_name }}</a>\n          </ng-template>\n\n          <ng-template #body>\n            <tr>\n              <td><strong>合计</strong></td>\n              <td class=\"text-right\">\n                <strong>{{ (data?.total)[type] | _currency }}</strong>\n              </td>\n            </tr>\n            <tr *ngIf=\"type === 'income'\">\n              <td><strong>结余</strong></td>\n              <td class=\"text-right\">\n                <strong>{{ data.total.surplus | _currency }}</strong>\n              </td>\n            </tr>\n          </ng-template>\n        </st>\n      </ng-container>\n    </nz-card>\n\n    <nz-card [nzLoading]=\"loading\" [nzBordered]=\"false\" nzTitle=\"最大 6 笔支出\" class=\"mb-0\">\n      <nz-list>\n        <app-record-rows [items]=\"maxRecords\"></app-record-rows>\n      </nz-list>\n    </nz-card>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AnalysisIndexComponent } from './index/index.component';\n\nconst routes: Routes = [{ path: 'index', component: AnalysisIndexComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AnalysisRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '@shared';\nimport { AnalysisRoutingModule } from './analysis-routing.module';\nimport { AnalysisIndexComponent } from './index/index.component';\n\nconst COMPONENTS = [AnalysisIndexComponent];\nconst COMPONENTS_NOROUNT = [];\n\n@NgModule({\n  imports: [SharedModule, AnalysisRoutingModule],\n  declarations: [...COMPONENTS, ...COMPONENTS_NOROUNT],\n})\nexport class AnalysisModule {}\n"],"sourceRoot":"webpack:///"}