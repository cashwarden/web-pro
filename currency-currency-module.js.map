{"version":3,"sources":["./src/app/routes/currency/form/form.component.ts","./src/app/routes/currency/form/form.component.html","./src/app/routes/currency/currency-routing.module.ts","./src/app/routes/currency/currency.module.ts","./src/app/routes/currency/index/index.component.ts","./src/app/routes/currency/index/index.component.html"],"names":[],"mappings":"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","file":"currency-currency-module.js","sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { CacheService } from '@delon/cache';\nimport { _HttpClient } from '@delon/theme';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { NzModalRef } from 'ng-zorro-antd/modal';\nimport { params } from 'src/app/shared/params';\n\n@Component({\n  selector: 'app-currency-form',\n  templateUrl: './form.component.html',\n})\nexport class CurrencyFormComponent implements OnInit {\n  record: any = {};\n  ledger_id = 0;\n  form = {\n    ledger_id: 0,\n    currency_code_from: '',\n    currency_code_to: '',\n    rate: 0,\n  };\n  codes: [{ code: string, name: string }];\n  base_currency_code: string;\n  loading = false;\n\n  constructor(\n    private modal: NzModalRef,\n    private msgSrv: NzMessageService,\n    public http: _HttpClient,\n    private cdr: ChangeDetectorRef,\n    private cache: CacheService,\n  ) {\n  }\n\n  ngOnInit(): void {\n    if (this.record.id) {\n      this.form = this.record;\n    }\n    this.ledger_id = this.cache.getNone(params.cacheKey.defaultIdLedger);\n    this.form.currency_code_to = this.base_currency_code;\n  }\n\n  save(value: any) {\n    const url = this.record.id ? `/${this.record.id}` : '';\n    const method = this.record.id ? 'put' : 'post';\n    value.ledger_id = this.ledger_id;\n    this.http.request(method, `/api/currencies${url}`, { body: value }).subscribe((res: any) => {\n      if (res.code !== 0) {\n        this.msgSrv.warning(res.message);\n        return;\n      }\n      this.msgSrv.success('保存成功');\n      this.modal.close(res.data);\n    });\n  }\n\n  changeCurrency(code: string) {\n    this.loading = true;\n    this.http.get(`/api/currencies/rate/${code}/${this.form.currency_code_to}`).subscribe((res: any) => {\n      if (res.code !== 0) {\n        this.msgSrv.warning(res.message);\n        return;\n      }\n      this.form.rate = res.data.rate;\n      this.loading = false;\n      this.cdr.detectChanges();\n    });\n  }\n\n  close() {\n    this.modal.destroy();\n  }\n}\n","<div class=\"modal-header\">\n  <div class=\"modal-title\" *ngIf=\"record.id\">编辑货币</div>\n  <div class=\"modal-title\" *ngIf=\"!record.id\">添加货币</div>\n</div>\n\n<form nz-form #f=\"ngForm\" se-container=\"1\" (ngSubmit)=\"save(form)\" labelWidth=\"100\">\n\n  <se label=\"基础货币\">\n    <input type=\"text\" nz-input [(ngModel)]=\"form.currency_code_to\" name=\"currency_code_to\" disabled />\n  </se>\n\n  <se label=\"货币名称\">\n    <nz-select [(ngModel)]=\"form.currency_code_from\" name=\"currency_code_from\" required\n               (ngModelChange)=\"changeCurrency($event)\">\n      <nz-option nzCustomContent [nzLabel]=\"i.name\" [nzValue]=\"i.code\" *ngFor=\"let i of codes\">\n        {{ i.name }}\n      </nz-option>\n    </nz-select>\n     <nz-spin nzSimple *ngIf=\"loading\" style=\"padding-top: 1rem\"></nz-spin>\n  </se>\n\n  <se label=\"汇率\" optionalHelp=\"默认自动获取最新汇率，可修改\" *ngIf=\"form.currency_code_from && !loading\">\n    <nz-input-group [nzAddOnBefore]=\"addOnBefore\" [nzAddOnAfter]=\"form.currency_code_to\">\n      <input type=\"number\" nz-input [(ngModel)]=\"form.rate\" name=\"rate\" required />\n    </nz-input-group>\n    <ng-template #addOnBefore>1{{form.currency_code_from}}=</ng-template>\n  </se>\n  <se col=\"1\">\n    <button nz-button nzType=\"primary\" [disabled]=\"f.invalid\">保存</button>\n    <button nz-button type=\"button\" (click)=\"close()\">关闭</button>\n  </se>\n</form>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CurrencyIndexComponent } from './index/index.component';\n\nconst routes: Routes = [\n\n  { path: 'index', component: CurrencyIndexComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CurrencyRoutingModule { }\n","import { NgModule, Type } from '@angular/core';\nimport { SharedModule } from '@shared';\nimport { CurrencyRoutingModule } from './currency-routing.module';\nimport { CurrencyIndexComponent } from './index/index.component';\nimport { CurrencyFormComponent } from './form/form.component';\n\nconst COMPONENTS: Type<void>[] = [\n  CurrencyIndexComponent,\n  CurrencyFormComponent];\n\n@NgModule({\n  imports: [\n    SharedModule,\n    CurrencyRoutingModule\n  ],\n  declarations: COMPONENTS,\n})\nexport class CurrencyModule { }\n","import { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\nimport { STColumn, STComponent } from '@delon/abc/st';\nimport { CacheService } from '@delon/cache';\nimport { ModalHelper, _HttpClient } from '@delon/theme';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { params } from 'src/app/shared/params';\nimport { CurrencyFormComponent } from '../form/form.component';\n\n\n@Component({\n  selector: 'app-currency-index',\n  templateUrl: './index.component.html',\n})\nexport class CurrencyIndexComponent implements OnInit {\n  @ViewChild('st', { static: false }) st: STComponent;\n\n  loading = true;\n  pagination: {};\n  list: any[] = [];\n  ledger: any;\n  q = {\n    page: 1,\n    pageSize: 100,\n    name: '',\n    ledger_id: 0,\n  };\n\n  columns: STColumn[] = [\n    { title: '货币', index: 'currency_code_from' },\n    { title: '汇率', index: 'rate' },\n    { title: '描述', render: 'custom' },\n    { title: '时间', type: 'date', index: 'updated_at' },\n    {\n      title: '',\n      buttons: [\n        {\n          icon: 'edit',\n          click: (item: any) => this.form(item),\n        },\n        {\n          icon: 'delete',\n          type: 'del',\n          pop: {\n            title: '确定要删除吗？',\n            okType: 'danger',\n          },\n          click: (record, _modal, comp) => {\n            this.delete(record, comp);\n          },\n        },\n      ],\n    },\n  ];\n  codes: [{ code: string, name: string }];\n  base_currency_code: string;\n\n  constructor(\n    private http: _HttpClient,\n    private modal: ModalHelper,\n    private cache: CacheService,\n    private msg: NzMessageService,\n    private cdr: ChangeDetectorRef,\n  ) {\n  }\n\n  ngOnInit() {\n    this.getData();\n    this.loadCodes();\n    this.ledger = this.cache.getNone(params.cacheKey.defaultLedger);\n    this.base_currency_code = this.ledger.base_currency_code;\n  }\n\n  getData(): void {\n    this.loading = true;\n    this.q.ledger_id = this.cache.getNone(params.cacheKey.defaultIdLedger);\n    this.http.get('/api/currencies', this.q).subscribe((res) => {\n      this.list = res.data.items;\n      this.pagination = res.data._meta;\n      this.loading = false;\n    });\n  }\n\n  form(record: { id?: number } = {}): void {\n    this.modal.create(\n      CurrencyFormComponent,\n      { record: record, codes: this.codes, base_currency_code: this.base_currency_code },\n      { size: 'md' },\n    ).subscribe((res) => {\n      if (record.id) {\n        this.getData();\n      } else {\n        this.list.splice(0, 0, res);\n        this.list = [...this.list];\n      }\n    });\n  }\n\n  delete(record: any, comp): void {\n    this.http.delete(`/api/currencies/${record.id}`).subscribe((res) => {\n      if (res?.code !== 0) {\n        this.msg.warning(res?.message);\n        return;\n      }\n      // tslint:disable-next-line: no-non-null-assertion\n      comp!.removeRow(record);\n      // this.getData();\n      this.msg.success('删除成功');\n    });\n  }\n\n  loadCodes(): void {\n    this.http.get('/api/currencies/codes').subscribe((res: any) => {\n      if (res.code !== 0) {\n        this.msg.warning(res.message);\n        return;\n      }\n      this.codes = res.data.filter((item: { code: string, name: string }) => item.code !== this.base_currency_code);\n      this.cdr.detectChanges();\n    });\n  }\n\n  submit(value: any): void {\n    if (value.name) {\n      this.q.name = value.name;\n      this.getData();\n    }\n  }\n}\n","<div class=\"pt-lg\">\n  <nz-card>\n    <div nz-row [nzGutter]=\"{ xs: 6, sm: 16, md: 24, lg: 32 }\">\n      <div nz-col>\n        <button (click)=\"form()\" nz-button nzType=\"primary\">新建</button>\n      </div>\n    </div>\n  </nz-card>\n</div>\n\n<nz-card>\n  <st #st [data]=\"list\" [columns]=\"columns\">\n    <ng-template st-row=\"custom\" let-item>\n      1 {{ item.currency_code_from }} = {{item.rate}} {{item.currency_code_to}}\n    </ng-template>\n  </st>\n</nz-card>\n"],"sourceRoot":"webpack:///"}