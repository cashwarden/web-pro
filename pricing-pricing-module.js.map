{"version":3,"sources":["./src/app/routes/pricing/pricing.module.ts","./src/app/routes/pricing/pricing-routing.module.ts","./src/app/routes/pricing/index/index.component.ts","./src/app/routes/pricing/index/index.component.html","./src/app/routes/pricing/form/form.component.html","./src/app/routes/pricing/form/form.component.ts"],"names":[],"mappings":"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","file":"pricing-pricing-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { SharedModule } from '@shared';\nimport { PricingRoutingModule } from './pricing-routing.module';\nimport { PricingIndexComponent } from './index/index.component';\nimport { PricingFormComponent } from './form/form.component';\n\nconst COMPONENTS = [PricingIndexComponent];\nconst COMPONENTS_NOROUNT = [PricingFormComponent];\n\n@NgModule({\n  imports: [SharedModule, PricingRoutingModule],\n  declarations: [...COMPONENTS, ...COMPONENTS_NOROUNT],\n})\nexport class PricingModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PricingIndexComponent } from './index/index.component';\n\nconst routes: Routes = [{ path: 'index', component: PricingIndexComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PricingRoutingModule {}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { ModalHelper, SettingsService, User, _HttpClient } from '@delon/theme';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { PricingFormComponent } from '../form/form.component';\n\n@Component({\n  selector: 'app-pricing-index',\n  templateUrl: './index.component.html',\n  styleUrls: ['./index.component.less'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PricingIndexComponent implements OnInit {\n  record: any;\n  listOfData = [\n    {\n      key: '1',\n      action: '无限量记录',\n      pro: '✅',\n      free: '✅',\n    },\n    {\n      key: '1',\n      action: '小程序记账',\n      pro: '✅',\n      free: '✅',\n    },\n    {\n      key: '1',\n      action: '导入导出',\n      pro: '✅',\n      free: '✅',\n    },\n    {\n      key: '1',\n      action: 'Telegram 记账',\n      pro: '✅',\n      free: '✅',\n    },\n    {\n      key: '1',\n      action: '统计分析',\n      pro: '✅',\n      free: '✅',\n    },\n    {\n      key: '1',\n      action: '普通账本',\n      pro: '无限',\n      free: '1 个',\n    },\n    {\n      key: '1',\n      action: '账户',\n      pro: '无限',\n      free: '5 个',\n    },\n    {\n      key: '1',\n      action: '定时记账',\n      pro: '无限',\n      free: '1 个',\n    },\n    {\n      key: '1',\n      action: '规则',\n      pro: '无限',\n      free: '5 个',\n    },\n    {\n      key: '1',\n      action: 'AA 账本',\n      pro: '✅',\n      free: '❌',\n    },\n    {\n      key: '1',\n      action: '共享账本',\n      pro: '✅',\n      free: '❌',\n    },\n    {\n      key: '1',\n      action: '预算',\n      pro: '✅',\n      free: '❌',\n    },\n    {\n      key: '1',\n      action: '投资类型账户（2022Q4）',\n      pro: '✅',\n      free: '❌',\n    },\n    {\n      key: '1',\n      action: '愿望清单',\n      pro: '✅',\n      free: '❌',\n    },\n    {\n      key: '1',\n      action: '日历图',\n      pro: '✅',\n      free: '❌',\n    },\n    {\n      key: '1',\n      action: 'API',\n      pro: '✅',\n      free: '❌',\n    },\n    {\n      key: '1',\n      action: '多币种',\n      pro: '✅',\n      free: '❌',\n    },\n  ];\n\n  get user(): User {\n    return this.settings.user;\n  }\n\n  constructor(\n    private settings: SettingsService,\n    private msg: NzMessageService,\n    private modalHelper: ModalHelper,\n    private http: _HttpClient,\n    private cdr: ChangeDetectorRef,\n  ) { }\n\n  ngOnInit() {\n    this.getData();\n  }\n\n  getData(): void {\n    this.http.get('/api/users/pro').subscribe((res) => {\n      this.record = res.data;\n\n      this.cdr.detectChanges();\n    });\n  }\n\n  buy(): void {\n    this.modalHelper.static(PricingFormComponent).subscribe((res) => {\n      if (res) {\n        this.getData();\n        this.msg.info('支付成功');\n      }\n    });\n  }\n}\n","<div class=\"pt-lg\">\n  <nz-card [nzBordered]=\"false\">\n    <ng-container *ngIf=\"user\">\n      <div nz-row class=\"avatarHolder\">\n        <div class=\"pr-md\">\n          <img src=\"{{ user.avatar }}\" />\n        </div>\n        <sv-container size=\"small\" col=\"1\">\n          <sv>\n            <span class=\"name\">{{ user.name }}<i nz-icon nzIconfont=\"icon-pro\" class=\"icon-sm badge-pro\" *ngIf=\"record\"></i></span>\n          </sv>\n          <sv label=\"Pro 会员有效期\" *ngIf=\"record\">{{ record.ended_at | _date }}</sv>\n          <sv label=\"Free 会员有效期\" *ngIf=\"!record\">永久有效</sv>\n        </sv-container>\n      </div>\n      <p>💗 付费支持 CashWarden，我们不会出售您的数据，也不会投放广告，因此您的订阅是 CashWarden 不断创新的动力。</p>\n\n      <nz-divider nzDashed></nz-divider>\n\n      <div nz-col nzMd=\"24\" nzLg=\"7\">\n        <nz-table #basicTable [nzData]=\"listOfData\" [nzShowPagination]=\"false\" nzPageSize=\"30\" nzSize=\"small\" [nzFooter]=\"footer\">\n          <thead>\n            <tr>\n              <th>功能</th>\n              <th>Pro（99/年）</th>\n              <th>Free</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let data of basicTable.data\">\n              <td>{{ data.action }}</td>\n              <td>{{ data.pro }}</td>\n              <td>{{ data.free }}</td>\n            </tr>\n          </tbody>\n          <ng-template #footer>\n            <button nz-button nzType=\"primary\" (click)=\"buy()\">立即续费</button>\n          </ng-template>\n        </nz-table>\n      </div>\n    </ng-container>\n  </nz-card>\n</div>\n","<div class=\"modal-header\">\n  <div class=\"modal-title\">请使用支付宝扫码支付</div>\n</div>\n<div class=\"center\">\n  <nz-spin nzSimple *ngIf=\"!buy_url\"></nz-spin>\n  <qr [value]=\"buy_url\" *ngIf=\"buy_url\"></qr>\n  <h3 nz-typography>99/年</h3>\n  <p nz-typography *ngIf=\"buy_url\">\n    <nz-spin nzSimple [nzIndicator]=\"indicatorTemplate\"> </nz-spin>\n    <ng-template #indicatorTemplate><i nz-icon nzType=\"loading\"></i> 正在等待支付结果（支付成功之后，请勿手动关闭窗口）</ng-template>\n  </p>\n</div>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { CacheService } from '@delon/cache';\nimport { _HttpClient } from '@delon/theme';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { NzModalRef } from 'ng-zorro-antd/modal';\n\n@Component({\n  selector: 'app-pricing-form',\n  templateUrl: './form.component.html',\n})\nexport class PricingFormComponent implements OnInit, OnDestroy {\n  buy_url: string;\n  out_sn: string;\n  check: any;\n\n  constructor(private http: _HttpClient, private modal: NzModalRef, private msgSrv: NzMessageService) {}\n\n  ngOnInit(): void {\n    this.loadQrcode();\n  }\n\n  loadQrcode() {\n    this.http.post('/api/users/upgrade-to-pro-request').subscribe((res: any) => {\n      if (res.code !== 0) {\n        this.msgSrv.warning(res.message);\n        return;\n      }\n      this.buy_url = res.data.qrCode;\n      this.out_sn = res.data.record.out_sn;\n      this.check = setInterval(() => this.checkReocrd(this.out_sn), 1000 * 3);\n    });\n  }\n\n  checkReocrd(out_sn: string) {\n    this.http.get(`/api/users/pro-record/${out_sn}`).subscribe((res: any) => {\n      if (res.code !== 0) {\n        this.msgSrv.warning(res.message);\n        return;\n      }\n      if (res.data.status === 'paid') {\n        this.modal.close(true);\n      }\n    });\n  }\n\n  close() {\n    this.modal.destroy();\n  }\n\n  ngOnDestroy() {\n    if (this.check) {\n      clearInterval(this.check);\n    }\n  }\n}\n"],"sourceRoot":"webpack:///"}